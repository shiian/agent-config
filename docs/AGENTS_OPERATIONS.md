# AGENTS.md 運用ガイド

> 正本ルール（AGENTS.md）の運用・保守に関する手順書。
> 正本と同じリポジトリに置く。

---

## 1. ファイル構成

```
AGENTS.md                    ← 正本：核心ルール（日本語）
docs/modes/
  engineering.md             ← Engineering詳細ルール（日本語）
  research.md                ← Research詳細ルール（日本語）
  thinking.md                ← Thinking詳細ルール（日本語）
  quick.md                   ← Quick詳細ルール（日本語）
docs/AGENTS_CHANGELOG.md     ← 変更履歴
docs/AGENTS_ERROR_LOG.md     ← エラーログ（核心ルール2.5）
docs/AGENTS_OPERATIONS.md    ← この運用ガイド

CLAUDE.md                    ← 実行版：核心ルール（英語）
.gemini/GEMINI.md            ← 実行版：核心ルール（英語、Gemini用）
```

---

## 2. 正本→実行版の変換手順

### 2.1 方針
- 正本（日本語）を**AIに英語翻訳させ、逆翻訳チェックで品質を確認**して実行版を作る
- 正本を改定するたびに、実行版も同期する

### 2.2 変換フロー

```
1. AIに正本を渡して英語に翻訳させる
2. 別のAI（または別セッション）に英語版を渡して日本語に逆翻訳させる
3. 逆翻訳と正本を比較し、意味のズレがないか確認する
4. ズレがあれば英語版を修正して再度逆翻訳チェック
5. 問題なければ英語版を実行版として確定する
```

### 2.3 変換時の注意点
- 構造（セクション番号、表、段階バー等）はそのまま維持する
- 日本語の例示は英語に翻訳する（省略しない）
- トーンのニュアンス（ISFP寄り等）は訳注として残す
- モード詳細への@参照パスはツールに合わせて調整する
  - Claude Code: `@docs/modes/engineering.md`
  - Gemini CLI: 同上（パスが同じなら共通）

### 2.4 同期の確認
- 正本を改定したら、実行版との差分を確認する
- Changelogに正本と実行版の両方の更新を記録する
- 実行版だけを改定することは禁止（常に正本が先）

---

## 3. claude.ai での運用方法

### 3.1 基本構成
- **Projectの指示欄**に核心ルール（英語実行版）を貼る
- **モード詳細**は必要時にチャットにファイル添付する

### 3.2 モード詳細の読み込み方
- チャットの冒頭で「Engineeringモードで進めたい」と宣言する
- そのタイミングでモード詳細ファイルを添付する
- または、Projectのknowledge filesにモード詳細を入れておき、指示欄に「モード宣言があったら該当ファイルを読め」と書く

### 3.3 Claude Code との違い

| | Claude Code | claude.ai |
|--|------------|-----------|
| 核心ルール | CLAUDE.md（自動読み込み） | Projectの指示欄に貼る |
| モード詳細 | @参照で必要時に読み込み | チャットに添付 or knowledge files |
| エラーログ | リポジトリ内のファイルに記録 | チャット内で記録→手動でファイルに転記 |

### 3.4 Gemini CLI との違い

| | Gemini CLI | claude.ai |
|--|-----------|-----------|
| 核心ルール | GEMINI.md（自動読み込み） | Projectの指示欄に貼る |
| モード詳細 | @参照で必要時に読み込み | チャットに添付 or knowledge files |

---

## 4. Changelog フォーマット

記録先：`docs/AGENTS_CHANGELOG.md`

### 4.1 エントリのフォーマット

```markdown
## YYYY-MM-DD

### [Type] Mode / Severity

- **変更内容**：何を変えたか
- **理由**：なぜ変えたか（どのエラー/問題がトリガーか）
- **影響**：運用がどう変わるか
- **対象ファイル**：正本 / 実行版 / モード詳細のどれを変えたか
```

### 4.2 Type（変更種別）

| Type | 意味 |
|------|------|
| Add | 新規ルール追加 |
| Change | 既存ルール変更 |
| Remove | ルール削除 |
| Fix | 誤り・矛盾の修正 |

### 4.3 Mode

対象のモード。核心ルールの変更なら `Core`。
`Core` / `Research` / `Engineering` / `Thinking` / `Quick` / `Operations`

### 4.4 Severity

変更の影響度。AGENTS.mdのSeverity（S0〜S3）と同じ尺度。
- S0：表現の微修正、誤字修正
- S1：ルールの追加・変更だが運用への影響は限定的
- S2：運用フローが変わる変更
- S3：方針レベルの変更（柱の追加/削除等）

### 4.5 記入例

```markdown
## 2026-02-12

### [Add] Core / S2

- **変更内容**：情報源の基本ゲート（4点チェック）を核心ルールに追加
- **理由**：品質検証がResearch限定だったが、全モードで必要と判断
- **影響**：全モードでソース採用前に実在性・論理構造・整合性・バイアスを確認する
- **対象ファイル**：AGENTS.md（正本）、CLAUDE.md（実行版）

### [Change] Engineering / S1

- **変更内容**：安全確認・Git運用を核心ルールからEngineering詳細に移動
- **理由**：核心ルールのトークン削減。Engineering以外で使う場面が限定的
- **影響**：Engineeringモード起動時にのみ読み込まれる
- **対象ファイル**：docs/modes/engineering.md
```
